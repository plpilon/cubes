<!DOCTYPE html>

<html lang="fr-CA">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Cubes - Recettes et inventaire</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --maxw: 1180px;
      }
      body {
        background: #f7f7fb;
      }
      .container-max {
        max-width: var(--maxw);
      }
      .recipe-card {
        border: 0;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
      }
      .tag {
        font-size: 0.8rem;
        border-radius: 999px;
      }
      .mono {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
      }
      .toc a {
        text-decoration: none;
      }
      .toc a:hover {
        text-decoration: underline;
      }
      .sticky-tools {
        position: sticky;
        top: 0;
        z-index: 10;
        background: #f7f7fb;
        padding-top: 12px;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      }
      @media (max-width: 991.98px) {
        .sticky-tools {
          position: static;
          padding-top: 10px;
          padding-bottom: 10px;
        }
        .hr-soft {
          display: none;
        } /* optionnel: évite de gaspiller de la hauteur mobile */
      }

      .muted {
        color: rgba(0, 0, 0, 0.65);
      }
      .smallcaps {
        letter-spacing: 0.06em;
        text-transform: uppercase;
        font-size: 0.78rem;
      }
      .section-title {
        margin-top: 34px;
        margin-bottom: 10px;
      }
      .btn-chip {
        border-radius: 999px;
      }
      .kbd {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        border: 1px solid rgba(0, 0, 0, 0.12);
        padding: 2px 6px;
        border-radius: 6px;
        background: white;
      }
      .list-tight li {
        margin-bottom: 4px;
      }
      .note {
        background: #fff;
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 14px;
        padding: 12px 14px;
      }
      .hr-soft {
        border: 0;
        height: 1px;
        background: rgba(0, 0, 0, 0.08);
        margin: 14px 0;
      }
      .badge-cat {
        background: rgba(13, 110, 253, 0.1);
        color: #0d6efd;
        border: 1px solid rgba(13, 110, 253, 0.25);
      }
      .badge-cube {
        background: rgba(25, 135, 84, 0.12);
        color: #198754;
        border: 1px solid rgba(25, 135, 84, 0.25);
      }
      .badge-cost {
        background: rgba(111, 66, 193, 0.12);
        color: #6f42c1;
        border: 1px solid rgba(111, 66, 193, 0.25);
      }
      .badge-nutri {
        background: rgba(255, 193, 7, 0.15);
        color: #8a6d00;
        border: 1px solid rgba(255, 193, 7, 0.35);
      }
      @media (max-width: 430px) {
        .btn.btn-sm {
          font-size: 1rem;
          padding-top: 10px !important;
          padding-bottom: 10px !important;
        }
        [data-stock-controls] .mono {
          font-size: 1.05rem;
        }
        .sticky-tools {
          padding-top: 10px;
          padding-bottom: 10px;
        }
      }

      /* iPhone / inventaire / boutons */
      #inventoryBar .card {
        width: 100%;
      }
      #inventoryBar {
        max-width: 100%;
        overflow-x: hidden;
      }
      .stock-controls .btn {
        min-width: 44px;
        min-height: 44px;
        border-radius: 999px;
      }
      .stock-controls .stock-value {
        min-width: 56px;
        text-align: center;
        font-weight: 700;
      }
      @media (max-width: 430px) {
        .stock-controls .btn {
          min-width: 48px;
          min-height: 48px;
          font-size: 1.05rem;
        }
        .stock-controls .stock-value {
          font-size: 1.05rem;
        }
      }

      /* Collapse recipes: toggle caret rotation */
      button[data-recipe-toggle] .mono {
        display: inline-block;
        transition: transform 0.15s ease;
      }
      button[data-recipe-toggle][aria-expanded="true"] .mono {
        transform: rotate(90deg);
      }

      @media (max-width: 991.98px) {
        .sticky-tools {
          position: static;
          padding-top: 10px;
          padding-bottom: 10px;
        }
        .hr-soft {
          display: none;
        }
      }
    </style>

    <script>
      // Empêche le navigateur de restaurer la position de scroll (mobile surtout)
      try {
        history.scrollRestoration = "manual";
      } catch (e) {}
    </script>
  </head>
  <body>
    <header class="py-4">
      <div class="container container-max">
        <div
          class="d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between gap-3"
        >
          <div>
            <h1 class="h3 mb-1">Cubes - Recettes et inventaire</h1>
            <p class="mb-0 muted"></p>
          </div>
          <div class="note">
            <div class="smallcaps muted mb-1">Règles du système</div>
            <ul class="list-tight mb-0">
              <li>
                Soupes et ragoûts complets: <b>2 tasses</b> par portion cube.
              </li>
              <li>
                Plats principaux modulaires, riz, bases: <b>1 tasse</b> par
                cube.
              </li>
              <li>
                Composants denses (racines, add-ins): <b>1/2 tasse</b> par cube.
              </li>
              <li>Portions saveurs: <b>30 ml</b> au besoin.</li>
              <li>
                Sans oignon, céleri, carotte frais. Poudres et bouillon
                acceptés.
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>
    <!-- Tools -->
    <div class="sticky-tools">
      <div class="container container-max">
        <!-- Mobile: barre minimale -->
        <div
          class="d-lg-none d-flex justify-content-between align-items-center"
        >
          <div class="smallcaps muted">Outils</div>
          <button
            aria-controls="toolsDrawer"
            class="btn btn-primary btn-sm"
            data-bs-target="#toolsDrawer"
            data-bs-toggle="offcanvas"
            type="button"
          >
            ☰ Outils
          </button>
        </div>
        <!-- Desktop seulement: tes outils actuels -->
        <div class="d-none d-lg-block">
          <div class="row g-2 align-items-center">
            <div class="col-12 col-lg-6">
              <label class="form-label mb-1 smallcaps muted" for="searchInput"
                >Recherche</label
              >
              <input
                aria-label="Recherche"
                class="form-control"
                id="searchInput"
                placeholder="Ex: chili verde, 2 tasses, edamame, coût, fibres..."
                type="search"
              />
              <div class="form-text">
                Astuce: tape <span class="kbd">tag:</span> ex
                <span class="kbd">tag:soupe</span> ou
                <span class="kbd">tag:vegetarien</span>.
              </div>
            </div>
            <div class="col-12 col-lg-6">
              <label class="form-label mb-1 smallcaps muted"
                >Filtres rapides</label
              >
              <div class="d-flex flex-wrap gap-2">
                <button
                  class="btn btn-outline-primary btn-sm btn-chip"
                  data-filter="tag:soupe"
                >
                  Soupes 2 tasses
                </button>
                <button
                  class="btn btn-outline-primary btn-sm btn-chip"
                  data-filter="tag:bol"
                >
                  Bols
                </button>
                <button
                  class="btn btn-outline-primary btn-sm btn-chip"
                  data-filter="tag:proteine"
                >
                  Protéines
                </button>
                <button
                  class="btn btn-outline-primary btn-sm btn-chip"
                  data-filter="tag:vegetarien"
                >
                  Végétarien
                </button>
                <button
                  class="btn btn-outline-primary btn-sm btn-chip"
                  data-filter="tag:poisson"
                >
                  Poisson
                </button>
                <button
                  class="btn btn-outline-primary btn-sm btn-chip"
                  data-filter="tag:cuisson-four"
                >
                  Four
                </button>
                <button
                  aria-pressed="true"
                  class="btn btn-success btn-sm btn-chip"
                  id="toggleInStock"
                >
                  En stock seulement
                </button>
                <button
                  class="btn btn-outline-secondary btn-sm btn-chip"
                  id="clearBtn"
                >
                  Réinitialiser
                </button>
              </div>
            </div>
          </div>
          <div class="hr-soft"></div>
          <div class="row g-3">
            <div class="col-12 col-lg-7">
              <div class="toc">
                <div class="smallcaps muted mb-1">Table des matières</div>
                <div class="d-flex flex-wrap gap-3">
                  <a href="#sec-soupes">Soupes et ragoûts 2 tasses</a>
                  <a href="#sec-Platsprincipaux">Plats principaux 1 tasse</a>
                  <a href="#sec-riz">Riz et grains 1 tasse</a>
                  <a href="#sec-veg">Bases légumes 1 tasse</a>
                  <a href="#sec-denses">Composants denses 1/2 tasse</a>
                  <a href="#sec-bols">Bols assemblés</a>
                  <a href="#sec-patisserie">Boulangerie en cubes</a>
                  <a href="#sec-sides">Accompagnements et idées</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <main class="py-4">
      <div class="container container-max">
        <!-- ========================= -->
        <!-- SOUPES 2 TASSES -->
        <!-- ========================= -->
        <h2 class="h4 section-title" id="sec-soupes">
          Soupes et ragoûts, portions 2 tasses
        </h2>
        <p class="muted">
          Chaque fiche: recette, format de cubes, pairings, nutrition et coût
          par portion de 2 tasses.
        </p>
        <div class="row g-3" id="recipes">
          <!-- Ham & Peas -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="soupe-jambon-pois"
            data-tags="soupe 2-tasses porc fibres proteine congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Soupe</span>
                  <span class="badge badge-cube">Cube 2 tasses</span>
                  <span class="badge text-bg-light tag">tag:soupe</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                  <span class="badge text-bg-light tag">tag:proteine</span>
                  <span class="badge text-bg-light tag">tag:sans-oignon</span>
                </div>
                <h3 class="h5 mb-1">Soupe jambon et pois</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-soupe-jambon-pois"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-soupe-jambon-pois"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-soupe-jambon-pois">
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 8 tasses, 4
                    cubes de 2 tasses
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>1 tasse pois cassés jaunes secs, rincés</li>
                        <li>
                          6 tasses bouillon (jusqu’à 3 tasses peuvent être du
                          lactosérum)
                        </li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>1 c. à thé poudre d’oignon</li>
                        <li>1/2 c. à thé thym séché</li>
                        <li>1 feuille de laurier, optionnel</li>
                        <li>
                          2 tasses jambon cuit maigre en dés (env 400 à 500 g)
                        </li>
                        <li>3 tasses pois verts surgelés</li>
                        <li>Poivre noir, sel si nécessaire</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>
                          Mettre pois cassés, bouillon, poudres, thym, laurier
                          dans une casserole.
                        </li>
                        <li>
                          Amener à ébullition puis réduire à frémissement doux,
                          couvercle entrouvert.
                        </li>
                        <li>Mijoter 35 à 40 min, remuer parfois.</li>
                        <li>Ajouter pois verts et jambon, mijoter 10 min.</li>
                        <li>
                          Retirer laurier. Mixer environ 1/3 de la soupe,
                          remettre au chaudron.
                        </li>
                        <li>
                          Refroidir, portionner en cubes de 2 tasses, congeler.
                        </li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="row g-2">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Pairings</div>
                      <ul class="list-tight">
                        <li>Se suffit à elle-même.</li>
                        <li>Si tu veux du croquant: 1/2 tasse chou rôti.</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">
                        Nutrition et coût, par 2 tasses
                      </div>
                      <div class="d-flex flex-wrap gap-2">
                        <span class="badge badge-nutri">≈ 380 à 420 kcal</span>
                        <span class="badge badge-nutri"
                          >≈ 30 à 34 g protéines</span
                        >
                        <span class="badge badge-nutri"
                          >≈ 14 à 16 g fibres</span
                        >
                        <span class="badge badge-cost">≈ 2.20 à 2.80 $</span>
                      </div>
                      <div class="muted mt-2">
                        Coût varie selon prix du jambon et du bouillon.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Cream of Mushroom -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="soupe-creme-champignons"
            data-tags="soupe 2-tasses vegetarien champignon fibres congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Soupe</span>
                  <span class="badge badge-cube">Cube 2 tasses</span>
                  <span class="badge text-bg-light tag">tag:soupe</span>
                  <span class="badge text-bg-light tag">tag:vegetarien</span>
                  <span class="badge text-bg-light tag">tag:sans-oignon</span>
                </div>
                <h3 class="h5 mb-1">Crème de champignons, version saine</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-soupe-creme-champignons"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-soupe-creme-champignons"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-soupe-creme-champignons"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 6 à 7 tasses, 3
                    cubes de 2 tasses
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>1.2 kg champignons tranchés</li>
                        <li>2 c. à soupe huile d’olive</li>
                        <li>1 c. à soupe beurre, optionnel</li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>1/2 c. à thé poudre d’oignon</li>
                        <li>1/2 c. à thé thym</li>
                        <li>
                          4 tasses bouillon (1 à 2 tasses peuvent être du
                          lactosérum)
                        </li>
                        <li>1 tasse lait évaporé ou boisson soya non sucrée</li>
                        <li>Poivre noir généreux</li>
                        <li>
                          Option: 1/2 tasse haricots blancs cuits, mixés (body +
                          fibres)
                        </li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>
                          Chauffer huile (et beurre) dans une grande casserole
                          large.
                        </li>
                        <li>
                          Cuire les champignons en 2 à 3 lots, sans surcharger,
                          jusqu’à bien brunis (20 à 25 min).
                        </li>
                        <li>Ajouter poudres et thym, 30 secondes.</li>
                        <li>Ajouter bouillon, mijoter 15 min.</li>
                        <li>
                          Mixer la majorité. Ajouter lait évaporé et option
                          haricots mixés.
                        </li>
                        <li>Mijoter 5 min. Refroidir, cubes 2 tasses.</li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="row g-2">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Pairings</div>
                      <ul class="list-tight">
                        <li>Avec 1/2 tasse de chou rôti, pour du croquant.</li>
                        <li>
                          Option protéine: 1/2 tasse haricots ou dés de jambon.
                        </li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">
                        Nutrition et coût, par 2 tasses
                      </div>
                      <div class="d-flex flex-wrap gap-2">
                        <span class="badge badge-nutri">≈ 260 à 320 kcal</span>
                        <span class="badge badge-nutri"
                          >≈ 14 à 18 g protéines</span
                        >
                        <span class="badge badge-nutri">≈ 6 à 8 g fibres</span>
                        <span class="badge badge-cost">≈ 2.90 à 3.10 $</span>
                      </div>
                      <div class="muted mt-2">
                        Hypothèse champignons à 8 $/kg. Haricots ajoutent un peu
                        de coût.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Basque fish stew -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="ragout-poisson-basque"
            data-tags="soupe 2-tasses poisson basque paprika congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Ragoût</span>
                  <span class="badge badge-cube">Cube 2 tasses</span>
                  <span class="badge text-bg-light tag">tag:soupe</span>
                  <span class="badge text-bg-light tag">tag:poisson</span>
                  <span class="badge text-bg-light tag">tag:sans-oignon</span>
                </div>
                <h3 class="h5 mb-1">Ragoût de poisson style basque</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-ragout-poisson-basque"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-ragout-poisson-basque"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-ragout-poisson-basque"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 6 tasses, 3
                    cubes de 2 tasses
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>
                          1 lb (450 g) poisson blanc ferme en gros morceaux
                          (morue, aiglefin, goberge)
                        </li>
                        <li>1.5 tasses tomates concassées</li>
                        <li>2 tasses bouillon</li>
                        <li>
                          1 tasse mélange de racines rôties (idéalement pomme de
                          terre majoritaire)
                        </li>
                        <li>1 c. à soupe huile d’olive</li>
                        <li>1 c. à thé paprika fumé</li>
                        <li>1/2 c. à thé paprika doux</li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>1/2 c. à thé poudre d’oignon</li>
                        <li>1 feuille de laurier</li>
                        <li>Poivre noir</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>
                          Chauffer l’huile, ajouter les épices 30 secondes.
                        </li>
                        <li>Ajouter tomates et bouillon. Mijoter 10 min.</li>
                        <li>Ajouter racines rôties et laurier.</li>
                        <li>
                          Ajouter poisson. Mijoter 5 à 7 min, juste assez pour
                          que ça s’effiloche.
                        </li>
                        <li>Retirer laurier. Refroidir, cubes 2 tasses.</li>
                      </ol>
                      <div class="muted mt-2">
                        Astuce: éviter de trop brasser après ajout du poisson.
                      </div>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="row g-2">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Pairings</div>
                      <ul class="list-tight">
                        <li>Meilleur seul, cube 2 tasses.</li>
                        <li>
                          Si tu ajoutes quelque chose: juste poivre ou herbes au
                          service.
                        </li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">
                        Nutrition et coût, par 2 tasses
                      </div>
                      <div class="d-flex flex-wrap gap-2">
                        <span class="badge badge-nutri">≈ 330 à 420 kcal</span>
                        <span class="badge badge-nutri"
                          >≈ 28 à 35 g protéines</span
                        >
                        <span class="badge badge-nutri">≈ 4 à 7 g fibres</span>
                        <span class="badge badge-cost">≈ 3.75 à 4.50 $</span>
                      </div>
                      <div class="muted mt-2">
                        Coût dominé par le poisson. Varie selon promotions.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Thai coconut fish soup -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="soupe-poisson-coco-thai"
            data-tags="soupe 2-tasses poisson thai coco champignon congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Soupe</span>
                  <span class="badge badge-cube">Cube 2 tasses</span>
                  <span class="badge text-bg-light tag">tag:soupe</span>
                  <span class="badge text-bg-light tag">tag:poisson</span>
                  <span class="badge text-bg-light tag">tag:bol</span>
                </div>
                <h3 class="h5 mb-1">Soupe de poisson coco, style thaï</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-soupe-poisson-coco-thai"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-soupe-poisson-coco-thai"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-soupe-poisson-coco-thai"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 6 tasses, 3
                    cubes de 2 tasses
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>1 lb (450 g) poisson blanc ferme en morceaux</li>
                        <li>3 tasses lait de coco léger</li>
                        <li>2 tasses bouillon</li>
                        <li>1 tasse champignons tranchés</li>
                        <li>1 c. à soupe pâte de curry rouge</li>
                        <li>1 c. à thé poudre de gingembre</li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>Option: 1 c. à thé sauce poisson</li>
                        <li>
                          À ajouter au service: jus de lime, coriandre, chili
                        </li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>
                          Mijoter coco + bouillon + pâte curry + poudres 10 min
                          doucement.
                        </li>
                        <li>Ajouter champignons 3 à 4 min.</li>
                        <li>Ajouter poisson, mijoter 5 min max.</li>
                        <li>Refroidir et congeler en cubes 2 tasses.</li>
                        <li>Ajouter lime et herbes à la réchauffe.</li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="row g-2">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Pairings</div>
                      <ul class="list-tight">
                        <li>À manger seul, cube 2 tasses.</li>
                        <li>Finition: lime, coriandre, chili crisp.</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">
                        Nutrition et coût, par 2 tasses
                      </div>
                      <div class="d-flex flex-wrap gap-2">
                        <span class="badge badge-nutri">≈ 380 à 450 kcal</span>
                        <span class="badge badge-nutri"
                          >≈ 26 à 32 g protéines</span
                        >
                        <span class="badge badge-nutri">≈ 3 à 5 g fibres</span>
                        <span class="badge badge-cost">≈ 5.50 à 6.80 $</span>
                      </div>
                      <div class="muted mt-2">
                        Coût dominé par coco + poisson.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Miso ginger chicken/tofu stew -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="soupe-miso-gingembre"
            data-tags="soupe 2-tasses poulet miso gingembre congelo proteine"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Soupe</span>
                  <span class="badge badge-cube">Cube 2 tasses</span>
                  <span class="badge text-bg-light tag">tag:soupe</span>
                  <span class="badge text-bg-light tag">tag:proteine</span>
                </div>
                <h3 class="h5 mb-1">Soupe miso gingembre, poulet ou tofu</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-soupe-miso-gingembre"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-soupe-miso-gingembre"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-soupe-miso-gingembre">
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 6 tasses, 3
                    cubes de 2 tasses
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>
                          1 lb (450 g) hauts de cuisse en cubes OU tofu ferme
                        </li>
                        <li>5 tasses bouillon</li>
                        <li>2 c. à soupe miso blanc</li>
                        <li>1 c. à thé poudre de gingembre</li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>1 tasse champignons tranchés</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>
                          Mijoter poulet et bouillon avec gingembre et ail 20
                          min.
                        </li>
                        <li>
                          Retirer du feu, dissoudre le miso dans un peu de
                          bouillon chaud, remettre.
                        </li>
                        <li>Ajouter champignons 5 min à feu doux.</li>
                        <li>Refroidir, cubes 2 tasses.</li>
                      </ol>
                      <div class="muted mt-2">
                        Ne pas bouillir fort après ajout du miso.
                      </div>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="row g-2">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Pairings</div>
                      <ul class="list-tight">
                        <li>
                          Très bon seul. Option: ajouter épinards à la
                          réchauffe.
                        </li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">
                        Nutrition et coût, par 2 tasses
                      </div>
                      <div class="d-flex flex-wrap gap-2">
                        <span class="badge badge-nutri">≈ 320 à 420 kcal</span>
                        <span class="badge badge-nutri"
                          >≈ 25 à 35 g protéines</span
                        >
                        <span class="badge badge-nutri">≈ 2 à 5 g fibres</span>
                        <span class="badge badge-cost">≈ 3.80 à 5.00 $</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Smoky cabbage & white bean stew -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="ragout-chou-haricots-blancs"
            data-tags="soupe 2-tasses vegetarien chou haricots fibres mexicain-sans-oignon congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Soupe</span>
                  <span class="badge badge-cube">Cube 2 tasses</span>
                  <span class="badge text-bg-light tag">tag:soupe</span>
                  <span class="badge text-bg-light tag">tag:vegetarien</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                </div>
                <h3 class="h5 mb-1">Ragoût chou et haricots blancs, fumé</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-ragout-chou-haricots-blancs"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-ragout-chou-haricots-blancs"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-ragout-chou-haricots-blancs"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 6 tasses, 3
                    cubes de 2 tasses
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>6 tasses chou haché</li>
                        <li>
                          3 tasses haricots blancs cuits (ou 2 grosses boîtes
                          rincées)
                        </li>
                        <li>2 tasses tomates concassées</li>
                        <li>3 tasses bouillon (jusqu’à 50% lactosérum)</li>
                        <li>1 c. à soupe huile</li>
                        <li>1 c. à thé paprika fumé</li>
                        <li>1/2 c. à thé paprika doux</li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>1/2 c. à thé poudre d’oignon</li>
                        <li>Poivre, option chili</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>
                          Cuire le chou à l’huile 8 à 10 min pour l’attendrir.
                        </li>
                        <li>Ajouter épices 30 secondes.</li>
                        <li>Ajouter tomates, haricots, bouillon.</li>
                        <li>Mijoter 25 à 30 min, découvert.</li>
                        <li>Refroidir, cubes 2 tasses.</li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="row g-2">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Pairings</div>
                      <ul class="list-tight">
                        <li>Se suffit à elle-même.</li>
                        <li>Option: un trait de vinaigre au service.</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">
                        Nutrition et coût, par 2 tasses
                      </div>
                      <div class="d-flex flex-wrap gap-2">
                        <span class="badge badge-nutri">≈ 320 à 420 kcal</span>
                        <span class="badge badge-nutri"
                          >≈ 16 à 22 g protéines</span
                        >
                        <span class="badge badge-nutri"
                          >≈ 12 à 16 g fibres</span
                        >
                        <span class="badge badge-cost">≈ 1.80 à 2.70 $</span>
                      </div>
                      <div class="muted mt-2">
                        Très économique, riche en fibres.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Pizza -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="pizza"
            data-tags="Plats principaux pizza congelo kit proteine"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Plats principaux</span>
                  <span class="badge badge-cube">Kit</span>
                  <span class="badge text-bg-light tag">tag:proteine</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                  <span class="badge text-bg-light tag">tag:sans-oignon</span>
                </div>
                <h3 class="h5 mb-1">Pizza</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-pizza"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-pizza"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-pizza">
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> 1 pizza
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight"></ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>Retirer la sauce du sac</li>
                        <li>
                          Dégeler la pâte, le fromage, la viande au frigo et la
                          sauce au frigo
                        </li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">Assemblage suggéré</div>
                  <ul class="list-tight">
                    <li>
                      2 tasse pâtes, 1/2 tasse de sauce, 1 tasse fromage, 1/2
                      tasse prosciuoto
                    </li>
                    <li>
                      Ou 1 tasse chili + 1/2 tasse racines rôties + 3/4 tasse
                      chou rôti
                    </li>
                  </ul>
                  <div class="smallcaps muted mb-1">
                    Nutrition et coût, par dîner (demi-pizza)
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-cost"></span>
                    <span class="badge badge-nutri"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ========================= -->
          <!-- Plats principaux 1 TASSE -->
          <!-- ========================= -->
          <div class="col-12">
            <h2 class="h4 section-title" id="sec-Platsprincipaux">
              Plats principaux et sauces, cubes de 1 tasse
            </h2>
            <p class="muted mb-0">
              Ces cubes sont des briques: on assemble avec riz et légumes pour
              atteindre 2.25 à 2.5 tasses.
            </p>
          </div>
          <!-- Turkey black bean chili verde (ground) -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="chili-verde-dinde-haricots"
            data-tags="Plats principaux 1-tasse chili verde dinde haricots fibres congelo proteine"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Plats principaux</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:proteine</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                  <span class="badge text-bg-light tag">tag:sans-oignon</span>
                </div>
                <h3 class="h5 mb-1">Chili verde dinde et haricots noirs</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-chili-verde-dinde-haricots"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-chili-verde-dinde-haricots"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-chili-verde-dinde-haricots"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 8 tasses, 8
                    cubes 1 tasse
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>1.25 lb (570 g) dinde hachée (idéalement 93%)</li>
                        <li>2 tasses haricots noirs cuits</li>
                        <li>2 tasses salsa verde (pot) ou tomatilles mixées</li>
                        <li>2 tasses bouillon (jusqu’à 50% lactosérum)</li>
                        <li>1 c. à thé cumin</li>
                        <li>1 c. à thé origan</li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>Sel, poivre</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>
                          Cuire la dinde à feu moyen jusqu’à plus rose, sans
                          trop la sécher.
                        </li>
                        <li>
                          Ajouter épices, haricots, salsa verde et bouillon.
                        </li>
                        <li>
                          Mijoter 25 à 30 min, découvert, jusqu’à texture
                          épaisse.
                        </li>
                        <li>Refroidir, cubes 1 tasse.</li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">Assemblage suggéré</div>
                  <ul class="list-tight">
                    <li>1 tasse chili + 0.75 tasse riz + 0.75 tasse légumes</li>
                    <li>
                      Ou 1 tasse chili + 1/2 tasse racines rôties + 3/4 tasse
                      chou rôti
                    </li>
                  </ul>
                  <div class="smallcaps muted mb-1">
                    Nutrition et coût, par dîner (2.5 tasses assemblées)
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-cost">≈ 3.50 à 4.50 $</span>
                    <span class="badge badge-nutri"
                      >≈ 500 à 650 kcal (selon riz)</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- DIY chili verde pulled chicken thighs -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="chili-verde-poulet-effiloche"
            data-tags="Plats principaux 1-tasse chili verde poulet effiloche tomatilles congelo proteine cuisson-four"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Plats principaux</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:proteine</span>
                  <span class="badge text-bg-light tag">tag:cuisson-four</span>
                  <span class="badge text-bg-light tag">tag:sans-oignon</span>
                </div>
                <h3 class="h5 mb-1">
                  Chili verde maison, poulet effiloché (sans oignon frais)
                </h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-chili-verde-poulet-effiloche"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-chili-verde-poulet-effiloche"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-chili-verde-poulet-effiloche"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 8 tasses, 8
                    cubes 1 tasse
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>1.5 kg hauts de cuisse désossés, sans peau</li>
                        <li>750 g tomatilles (env 1.5 lb), décortiquées</li>
                        <li>2 piments poblano</li>
                        <li>1 à 2 jalapeños</li>
                        <li>3 gousses ail, ou 1.5 c. à thé poudre d’ail</li>
                        <li>1 tasse bouillon</li>
                        <li>1 c. à soupe huile</li>
                        <li>1 c. à thé poudre d’oignon</li>
                        <li>1 c. à thé cumin</li>
                        <li>1/2 c. à thé origan</li>
                        <li>Sel, poivre</li>
                        <li>Option: 1/2 tasse haricots blancs mixés (body)</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>
                          Four à 425°F. Rôtir tomatilles et piments 20 à 25 min.
                        </li>
                        <li>Mixer avec bouillon et épices.</li>
                        <li>
                          Dans un chaudron: saisir légèrement le poulet 2 à 3
                          min par côté.
                        </li>
                        <li>
                          Ajouter sauce verde, mijoter couvert 30 à 35 min.
                        </li>
                        <li>
                          Effilocher en grosses fibres, remettre, mijoter 10 min
                          découvert.
                        </li>
                        <li>Refroidir, cubes 1 tasse.</li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">Assemblage suggéré</div>
                  <ul class="list-tight">
                    <li>
                      1 tasse verde + 0.75 tasse riz + 0.75 tasse chou et
                      edamame
                    </li>
                    <li>Finition au service: lime, coriandre, chili</li>
                  </ul>
                  <div class="smallcaps muted mb-1">
                    Coût et nutrition, par dîner assemblé
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-cost"
                      >≈ 4.50 à 6.50 $ (selon prix du poulet)</span
                    >
                    <span class="badge badge-nutri">≈ 550 à 750 kcal</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Black bean quinoa chili -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="chili-vegetarien-haricots-quinoa"
            data-tags="Plats principaux 1-tasse vegetarien chili haricots quinoa fibres congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Plats principaux</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:vegetarien</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                </div>
                <h3 class="h5 mb-1">Chili haricots noirs et quinoa, fumé</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-chili-vegetarien-haricots-quinoa"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-chili-vegetarien-haricots-quinoa"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-chili-vegetarien-haricots-quinoa"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 8 tasses, 8
                    cubes 1 tasse
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>3 tasses haricots noirs cuits</li>
                        <li>1.5 tasses quinoa cuit</li>
                        <li>2 tasses tomates concassées</li>
                        <li>2 tasses bouillon (jusqu’à 50% lactosérum)</li>
                        <li>1 c. à thé paprika fumé</li>
                        <li>1 c. à thé cumin</li>
                        <li>1 c. à thé poudre d’ail</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>Tout mélanger dans une casserole.</li>
                        <li>Mijoter 25 à 30 min, découvert.</li>
                        <li>Refroidir, cubes 1 tasse.</li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">Assemblage suggéré</div>
                  <ul class="list-tight">
                    <li>
                      2 cubes (2 tasses) en bol soupe, ou 1 cube + riz + légumes
                    </li>
                  </ul>
                  <div class="smallcaps muted mb-1">
                    Coût et nutrition, par dîner
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-cost">≈ 1.70 à 2.70 $</span>
                    <span class="badge badge-nutri">≈ 450 à 650 kcal</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Red lentil coconut curry -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="curry-lentilles-coco"
            data-tags="Plats principaux 1-tasse vegetarien curry lentilles coco fibres congelo bol"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Plats principaux</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:vegetarien</span>
                  <span class="badge text-bg-light tag">tag:bol</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                </div>
                <h3 class="h5 mb-1">Curry coco aux lentilles rouges</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-curry-lentilles-coco"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-curry-lentilles-coco"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-curry-lentilles-coco">
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 8 tasses, 8
                    cubes 1 tasse
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>2 tasses lentilles rouges sèches</li>
                        <li>1 boîte lait de coco léger (400 ml)</li>
                        <li>4 tasses bouillon (jusqu’à 50% lactosérum)</li>
                        <li>1 c. à soupe poudre de curry</li>
                        <li>1 c. à thé poudre de gingembre</li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>2 tasses épinards surgelés</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>Mélanger lentilles, liquides et épices.</li>
                        <li>Mijoter 20 à 25 min, remuer parfois.</li>
                        <li>Ajouter épinards, 5 min.</li>
                        <li>Refroidir, cubes 1 tasse.</li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">Assemblage suggéré</div>
                  <ul class="list-tight">
                    <li>1 tasse curry + 0.75 tasse riz + 0.75 tasse légumes</li>
                  </ul>
                  <div class="smallcaps muted mb-1">
                    Coût et nutrition, par dîner bol
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-cost">≈ 1.15 à 2.50 $</span>
                    <span class="badge badge-nutri">≈ 480 à 650 kcal</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Chickpea tomato masala -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="masala-pois-chiches"
            data-tags="Plats principaux 1-tasse vegetarien masala pois-chiches tomate fibres congelo bol"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Plats principaux</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:vegetarien</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                  <span class="badge text-bg-light tag">tag:bol</span>
                </div>
                <h3 class="h5 mb-1">Masala tomate aux pois chiches</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-masala-pois-chiches"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-masala-pois-chiches"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-masala-pois-chiches">
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 8 tasses, 8
                    cubes 1 tasse
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>4 tasses pois chiches cuits</li>
                        <li>2 tasses tomates concassées</li>
                        <li>2 tasses bouillon (jusqu’à 50% lactosérum)</li>
                        <li>1 c. à thé garam masala</li>
                        <li>1 c. à thé cumin</li>
                        <li>1 c. à thé coriandre moulue</li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>1 c. à thé poudre de gingembre</li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>Tout combiner, mijoter 30 min jusqu’à épais.</li>
                        <li>Refroidir, cubes 1 tasse.</li>
                      </ol>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">Assemblage suggéré</div>
                  <ul class="list-tight">
                    <li>
                      1 tasse masala + 0.75 tasse riz + 0.5 tasse racines rôties
                    </li>
                  </ul>
                  <div class="smallcaps muted mb-1">
                    Coût et nutrition, par dîner
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-cost">≈ 1.20 à 3.20 $</span>
                    <span class="badge badge-nutri">≈ 500 à 700 kcal</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Honey garlic ginger chicken cubes -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="poulet-miel-ail-gingembre"
            data-tags="Plats principaux 1-tasse poulet glaze miel ail gingembre epice congelo proteine cuisson-four"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Protéine</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:proteine</span>
                  <span class="badge text-bg-light tag">tag:cuisson-four</span>
                  <span class="badge text-bg-light tag">tag:sans-oignon</span>
                </div>
                <h3 class="h5 mb-1">
                  Poulet glaçage miel, ail, gingembre, léger piquant
                </h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-poulet-miel-ail-gingembre"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-poulet-miel-ail-gingembre"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-poulet-miel-ail-gingembre"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 8 tasses, 8
                    cubes 1 tasse
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>
                          1.5 kg hauts de cuisse désossés, sans peau, en
                          morceaux
                        </li>
                        <li>3 c. à soupe miel</li>
                        <li>4 c. à soupe sauce soya</li>
                        <li>1 c. à soupe vinaigre de riz</li>
                        <li>1 c. à soupe huile neutre ou sésame</li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>1.5 c. à soupe gingembre en pot, égoutté un peu</li>
                        <li>
                          1/4 c. à thé flocons chili (ou 1/2 c. à thé sambal)
                        </li>
                        <li>
                          Option: 1 c. à thé fécule + 1 c. à soupe eau (glaze
                          qui colle)
                        </li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>
                          Four à 425°F. Rôtir le poulet 20 à 25 min, retourner
                          une fois.
                        </li>
                        <li>
                          Chaudron: mijoter miel + soya + vinaigre + gingembre +
                          ail + chili, épaissir au besoin.
                        </li>
                        <li>
                          Mélanger poulet rôti et glaze, chauffer 2 à 3 min.
                        </li>
                        <li>Refroidir, cubes 1 tasse.</li>
                      </ol>
                      <div class="muted mt-2">
                        Astuce: le glaze après cuisson, pas avant, pour un
                        meilleur résultat au congélo.
                      </div>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">Assemblage suggéré</div>
                  <ul class="list-tight">
                    <li>
                      1 tasse poulet + 0.75 tasse riz + 0.75 tasse brocoli slaw
                    </li>
                  </ul>
                  <div class="smallcaps muted mb-1">
                    Coût et nutrition, par dîner assemblé
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-cost"
                      >≈ 4.50 à 7.00 $ (selon promo poulet)</span
                    >
                    <span class="badge badge-nutri">≈ 550 à 800 kcal</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Paneer chickpea masala with Shan -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="paneer-pois-chiches-masala"
            data-tags="Plats principaux 1-tasse vegetarien paneer pois-chiches masala coco congelo bol proteine fibres"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Plats principaux</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:vegetarien</span>
                  <span class="badge text-bg-light tag">tag:proteine</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                </div>
                <h3 class="h5 mb-1">
                  Paneer et pois chiches masala, mélange Shan Chicken Masala
                </h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-paneer-pois-chiches-masala"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-paneer-pois-chiches-masala"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-paneer-pois-chiches-masala"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 8 tasses, 8
                    cubes 1 tasse
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>450 g paneer en cubes</li>
                        <li>2 boîtes pois chiches (540 ml), rincés</li>
                        <li>2 c. à soupe huile</li>
                        <li>1.5 tasses tomates concassées ou passata</li>
                        <li>1 tasse eau ou bouillon</li>
                        <li>
                          1/2 tasse lait de coco léger (ou lait évaporé, au
                          choix)
                        </li>
                        <li>
                          2.5 c. à soupe mélange Shan Chicken Masala (ajuster au
                          goût)
                        </li>
                        <li>1 c. à thé poudre d’ail</li>
                        <li>1/2 c. à thé poudre d’oignon</li>
                        <li>
                          Option: 1/2 tasse lentilles cuites mixées (stabilité +
                          fibres)
                        </li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Étapes</div>
                      <ol class="list-tight">
                        <li>Chauffer huile, ajouter épices 20 à 30 sec.</li>
                        <li>Ajouter tomates, mijoter 5 min.</li>
                        <li>
                          Ajouter eau ou bouillon, puis option lentilles mixées,
                          mijoter 5 min.
                        </li>
                        <li>Ajouter pois chiches, mijoter 10 min.</li>
                        <li>Ajouter paneer, puis coco, mijoter 5 min max.</li>
                        <li>Refroidir, cubes 1 tasse.</li>
                      </ol>
                      <div class="muted mt-2">
                        Ajouter coco à la fin pour éviter séparation.
                      </div>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">Assemblage suggéré</div>
                  <ul class="list-tight">
                    <li>
                      1 tasse masala + 0.75 tasse basmati + 0.75 tasse chou rôti
                    </li>
                  </ul>
                  <div class="smallcaps muted mb-1">
                    Coût et nutrition, par dîner assemblé
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-cost"
                      >≈ 3.50 à 6.00 $ (paneer et marques)</span
                    >
                    <span class="badge badge-nutri">≈ 600 à 850 kcal</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ========================= -->
          <!-- RIZ ET GRAINS -->
          <!-- ========================= -->
          <div class="col-12">
            <h2 class="h4 section-title" id="sec-riz">
              Riz et grains, cubes de 1 tasse
            </h2>
            <p class="muted mb-0">
              Le riz est toujours en cubes de 1 tasse. Tu peux utiliser 3/4 de
              cube selon ton appétit.
            </p>
          </div>
          <!-- Calrose rice -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="riz-calrose-poke"
            data-tags="riz 1-tasse calrose poke congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Riz</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:bol</span>
                </div>
                <h3 class="h5 mb-1">Riz Calrose pour bols type poke</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-riz-calrose-poke"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-riz-calrose-poke"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-riz-calrose-poke">
                  <div class="muted mb-2">
                    Rendement variable selon quantité. Ratio pour cuisson.
                  </div>
                  <div class="smallcaps muted mb-1">Ratio</div>
                  <ul class="list-tight">
                    <li>1 tasse riz Calrose sec</li>
                    <li>
                      1.25 tasse eau (option: remplacer jusqu’à 25% par
                      lactosérum)
                    </li>
                  </ul>
                  <div class="smallcaps muted mb-1">Étapes</div>
                  <ol class="list-tight">
                    <li>Rincer légèrement.</li>
                    <li>
                      Cuire, refroidir rapidement, portionner en cubes de 1
                      tasse.
                    </li>
                  </ol>
                  <div class="smallcaps muted mb-1">Notes congélation</div>
                  <ul class="list-tight">
                    <li>Ne pas trop tasser, ça réchauffe mieux.</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <!-- Basmati rice -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="riz-basmati-nature"
            data-tags="riz 1-tasse basmati congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Riz</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                </div>
                <h3 class="h5 mb-1">Riz basmati neutre</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-riz-basmati-nature"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-riz-basmati-nature"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-riz-basmati-nature">
                  <div class="muted mb-2">
                    Ratio pour cuisson et congélation.
                  </div>
                  <div class="smallcaps muted mb-1">Ratio</div>
                  <ul class="list-tight">
                    <li>1 tasse basmati sec</li>
                    <li>1.5 tasse eau (option: jusqu’à 50% lactosérum)</li>
                  </ul>
                  <div class="smallcaps muted mb-1">Étapes</div>
                  <ol class="list-tight">
                    <li>Rincer très bien.</li>
                    <li>
                      Cuire juste tendre, laisser évaporer 5 min, égrainer.
                    </li>
                    <li>Refroidir, cubes 1 tasse.</li>
                  </ol>
                  <div class="smallcaps muted mb-1">Astuce</div>
                  <div class="muted">
                    Sous-cuire légèrement, la réchauffe termine la cuisson.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Coconut basmati -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="riz-basmati-coco"
            data-tags="riz 1-tasse basmati coco bol congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Riz</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:bol</span>
                </div>
                <h3 class="h5 mb-1">Riz basmati coco, version congélo</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-riz-basmati-coco"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-riz-basmati-coco"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-riz-basmati-coco">
                  <div class="muted mb-2">
                    Équilibre coco pour éviter séparation.
                  </div>
                  <div class="smallcaps muted mb-1">Ratio</div>
                  <ul class="list-tight">
                    <li>1 tasse basmati sec</li>
                    <li>0.75 tasse lait de coco léger</li>
                    <li>0.75 tasse eau (ou un peu de lactosérum)</li>
                  </ul>
                  <div class="smallcaps muted mb-1">Étapes</div>
                  <ol class="list-tight">
                    <li>Rincer bien.</li>
                    <li>Cuire, laisser évaporer 5 min, égrainer.</li>
                    <li>Refroidir, cubes 1 tasse.</li>
                  </ol>
                  <div class="smallcaps muted mb-1">Note</div>
                  <div class="muted">
                    Éviter 100% coco, ça devient gras au congélo.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Quinoa -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="quinoa-nature"
            data-tags="grain 1-tasse quinoa congelo fibres"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Grain</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                </div>
                <h3 class="h5 mb-1">Quinoa neutre</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-quinoa-nature"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-quinoa-nature"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-quinoa-nature">
                  <div class="muted mb-2">
                    Rendement: environ 6 tasses cuites si tu pars de 2 tasses
                    sèches.
                  </div>
                  <div class="smallcaps muted mb-1">Ratio</div>
                  <ul class="list-tight">
                    <li>1 tasse quinoa sec</li>
                    <li>2 tasses eau (jusqu’à 50% lactosérum possible)</li>
                  </ul>
                  <div class="smallcaps muted mb-1">Étapes</div>
                  <ol class="list-tight">
                    <li>Rincer, cuire, refroidir, cubes 1 tasse.</li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
          <!-- ========================= -->
          <!-- BASES LEGUMES -->
          <!-- ========================= -->
          <div class="col-12">
            <h2 class="h4 section-title" id="sec-veg">
              Bases légumes, cubes de 1 tasse
            </h2>
            <p class="muted mb-0">
              Bases neutres, flexibles. Ajouter lime, vinaigre, herbes au
              service.
            </p>
          </div>
          <!-- Roasted cabbage & cauliflower -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="legumes-chou-choufleur-rotis"
            data-tags="legumes 1-tasse chou chou-fleur cuisson-four congelo fibres"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Légumes</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:cuisson-four</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                </div>
                <h3 class="h5 mb-1">Chou et chou-fleur rôtis, base neutre</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-legumes-chou-choufleur-rotis"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-legumes-chou-choufleur-rotis"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-legumes-chou-choufleur-rotis"
                >
                  <div class="muted mb-2">
                    Rendement variable selon volume. Idéal pour équilibrer bols.
                  </div>
                  <div class="smallcaps muted mb-1">Ingrédients</div>
                  <ul class="list-tight">
                    <li>Chou en gros morceaux + chou-fleur</li>
                    <li>Huile, sel, poudre d’ail</li>
                  </ul>
                  <div class="smallcaps muted mb-1">Étapes</div>
                  <ol class="list-tight">
                    <li>
                      Four à 425°F. Rôtir 30 à 35 min, retourner une fois.
                    </li>
                    <li>Refroidir, cubes 1 tasse.</li>
                  </ol>
                  <div class="smallcaps muted mb-1">Pairings</div>
                  <div class="muted">
                    Chili, poulet miel, curry lentilles, masala paneer.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Spinach/kale base -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="legumes-epinards-kale"
            data-tags="legumes 1-tasse epinards kale congelo fibres"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Légumes</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                </div>
                <h3 class="h5 mb-1">Base épinards ou kale, sautée</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-legumes-epinards-kale"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-legumes-epinards-kale"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-legumes-epinards-kale"
                >
                  <div class="smallcaps muted mb-1">Étapes</div>
                  <ol class="list-tight">
                    <li>Sauter très brièvement avec poudre d’ail.</li>
                    <li>Presser l’eau, refroidir, cubes 1 tasse.</li>
                  </ol>
                  <div class="muted">
                    Super pour ajouter du volume sans exploser les calories.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Broccoli slaw base -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="legumes-brocoli-slaw"
            data-tags="legumes 1-tasse brocoli slaw congelo fibres"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Légumes</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                </div>
                <h3 class="h5 mb-1">Base brocoli slaw, sautée légère</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-legumes-brocoli-slaw"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-legumes-brocoli-slaw"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-legumes-brocoli-slaw">
                  <div class="smallcaps muted mb-1">Ingrédients</div>
                  <ul class="list-tight">
                    <li>1 sac brocoli slaw OU 2 brocolis (tiges râpées)</li>
                    <li>Huile neutre, poudre d’ail, sel</li>
                  </ul>
                  <div class="smallcaps muted mb-1">Étapes</div>
                  <ol class="list-tight">
                    <li>Sauter 4 à 6 min, juste tendre.</li>
                    <li>Refroidir, cubes 1 tasse.</li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
          <!-- Cabbage + edamame mix -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="legumes-chou-edamame"
            data-tags="legumes 1-tasse chou edamame poke bol proteine fibres congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Légumes</span>
                  <span class="badge badge-cube">Cube 1 tasse</span>
                  <span class="badge text-bg-light tag">tag:bol</span>
                  <span class="badge text-bg-light tag">tag:proteine</span>
                </div>
                <h3 class="h5 mb-1">Mix chou et edamame, base neutre</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-legumes-chou-edamame"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-legumes-chou-edamame"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-legumes-chou-edamame">
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 6 à 7 tasses, 6
                    à 7 cubes
                  </div>
                  <div class="smallcaps muted mb-1">Ingrédients</div>
                  <ul class="list-tight">
                    <li>Environ 700 g chou tranché fin</li>
                    <li>2 tasses edamame surgelé, décongelé</li>
                    <li>1 c. à soupe huile neutre</li>
                    <li>1/2 c. à thé sel</li>
                    <li>1/2 c. à thé poudre d’ail</li>
                    <li>Poivre, optionnel</li>
                  </ul>
                  <div class="smallcaps muted mb-1">Étapes</div>
                  <ol class="list-tight">
                    <li>Sauter le chou 8 à 10 min, un peu de coloration.</li>
                    <li>Ajouter sel et ail 1 min.</li>
                    <li>Ajouter edamame 2 à 3 min.</li>
                    <li>Refroidir, cubes 1 tasse.</li>
                  </ol>
                  <div class="smallcaps muted mb-1">Pairings</div>
                  <div class="muted">
                    Poke végétarien, chili verde, poulet miel, bols rapides.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ========================= -->
          <!-- DENSES 1/2 TASSE -->
          <!-- ========================= -->
          <div class="col-12">
            <h2 class="h4 section-title" id="sec-denses">
              Composants denses, cubes de 1/2 tasse
            </h2>
            <p class="muted mb-0">
              Ici, on contrôle les portions: racines rôties, fruits, etc.
            </p>
          </div>
          <!-- Mixed roasted roots -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="racines-roties-melange"
            data-tags="dense 1-2-tasse racines patate patate-douce courge betterave cuisson-four congelo fibres"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Dense</span>
                  <span class="badge badge-cube">Cube 1/2 tasse</span>
                  <span class="badge text-bg-light tag">tag:cuisson-four</span>
                </div>
                <h3 class="h5 mb-1">
                  Mélange racines rôties (un seul plateau)
                </h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-racines-roties-melange"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-racines-roties-melange"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-racines-roties-melange"
                >
                  <div class="muted mb-2">
                    <span class="mono">Rendement:</span> environ 6 tasses, 12
                    cubes de 1/2 tasse
                  </div>
                  <div class="smallcaps muted mb-1">Ingrédients</div>
                  <ul class="list-tight">
                    <li>
                      Pommes de terre, patates douces, courge, betteraves
                      (couper uniforme)
                    </li>
                    <li>Huile, sel, poudre d’ail, paprika fumé optionnel</li>
                  </ul>
                  <div class="smallcaps muted mb-1">Étapes</div>
                  <ol class="list-tight">
                    <li>
                      Four à 425°F. Rôtir 35 à 45 min, retourner une fois.
                    </li>
                    <li>Refroidir, cubes 1/2 tasse.</li>
                  </ol>
                  <div class="smallcaps muted mb-1">Usage</div>
                  <div class="muted">
                    Traiter comme féculent: 0.5 tasse par repas.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Mango portions -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="mangue-portions"
            data-tags="dense 1-2-tasse fruit mangue poke bol congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Dense</span>
                  <span class="badge badge-cube">Cube 1/2 tasse</span>
                  <span class="badge text-bg-light tag">tag:bol</span>
                </div>
                <h3 class="h5 mb-1">Mangue en portions</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-mangue-portions"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-mangue-portions"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-mangue-portions">
                  <div class="muted mb-2">
                    Portionner la mangue surgelée en cubes de 1/2 tasse.
                  </div>
                  <div class="smallcaps muted mb-1">Usage</div>
                  <ul class="list-tight">
                    <li>
                      Poke végétarien: 0.25 tasse par bol (la moitié d’un cube
                      1/2 tasse)
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <!-- 30ml flavor cubes -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="saveur-cubes-30ml"
            data-tags="dense 30ml saveur sauce curry-paste tomato-paste congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Saveurs</span>
                  <span class="badge badge-cube">Cube 30 ml</span>
                </div>
                <h3 class="h5 mb-1">Cubes 30 ml, idées</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-saveur-cubes-30ml"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-saveur-cubes-30ml"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-saveur-cubes-30ml">
                  <ul class="list-tight">
                    <li>Pâte de curry rouge, portionnée</li>
                    <li>Pâte de tomate</li>
                    <li>Gingembre, ail, mélange</li>
                    <li>Chili crisp, huile piment</li>
                  </ul>
                  <div class="muted">
                    Objectif: réduire le gaspillage, accélérer les repas.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ========================= -->
          <!-- BOLS -->
          <!-- ========================= -->
          <div class="col-12">
            <h2 class="h4 section-title" id="sec-bols">
              Bols assemblés, max 2.5 tasses
            </h2>
            <p class="muted mb-0">
              Ces fiches décrivent l’assemblage, pas un cube unique.
            </p>
          </div>
          <!-- Vegetarian poke bowl -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="bol-poke-vegetarien"
            data-tags="bol poke vegetarien edamame chou mangue riz calrose sans-tofu 2-5-tasses"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Bol</span>
                  <span class="badge badge-cube">Assemblage</span>
                  <span class="badge text-bg-light tag">tag:bol</span>
                  <span class="badge text-bg-light tag">tag:vegetarien</span>
                </div>
                <h3 class="h5 mb-1">Bol poke végétarien, sans tofu</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-bol-poke-vegetarien"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-bol-poke-vegetarien"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-bol-poke-vegetarien">
                  <div class="muted mb-2">
                    Objectif portion: 2.5 tasses par personne.
                  </div>
                  <div class="smallcaps muted mb-1">Portion par bol</div>
                  <ul class="list-tight">
                    <li>0.75 tasse riz (Calrose idéal)</li>
                    <li>0.75 tasse edamame</li>
                    <li>
                      0.75 tasse base légumes (chou + edamame ou brocoli slaw)
                    </li>
                    <li>0.25 tasse mangue (1/2 cube de 1/2 tasse)</li>
                  </ul>
                  <div class="smallcaps muted mb-1">Sauce simple</div>
                  <ul class="list-tight">
                    <li>Soya + vinaigre de riz + 1 c. à thé huile de sésame</li>
                  </ul>
                  <div class="smallcaps muted mb-1">Notes congélo</div>
                  <div class="muted">
                    Congeler séparément riz, mix légumes, mangue. Ajouter nori
                    et lime au service.
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">
                    Coût et nutrition, par bol
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-cost">≈ 1.70 à 2.60 $</span>
                    <span class="badge badge-nutri">≈ 450 à 600 kcal</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Generic bowl template -->
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="bol-template"
            data-tags="bol template 2-5-tasses systeme assemblage"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Bol</span>
                  <span class="badge badge-cube">Template</span>
                  <span class="badge text-bg-light tag">tag:bol</span>
                </div>
                <h3 class="h5 mb-1">Template bol, simple et stable</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-bol-template"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-bol-template"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-bol-template">
                  <div class="smallcaps muted mb-1">Format</div>
                  <ul class="list-tight">
                    <li>
                      1 tasse cube Plats principaux (protéine ou légumineuses)
                    </li>
                    <li>0.75 à 1 tasse riz ou quinoa (souvent 1 cube)</li>
                    <li>0.75 à 1 tasse légumes base</li>
                    <li>Option: 0.5 tasse racines rôties si besoin</li>
                  </ul>
                  <div class="muted">
                    Total: 2.25 à 2.5 tasses. Tu restes dans ta limite.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ========================= -->
          <!-- PATISSERIE -->
          <!-- ========================= -->
          <div class="col-12">
            <h2 class="h4 section-title" id="sec-patisserie">
              Boulangerie en cubes
            </h2>
            <p class="muted mb-0">
              Bonus, portions contrôlées. Ici: banane, fibres, cuisson en moules
              silicone 1/2 tasse.
            </p>
          </div>
          <!-- Banana bread cubes -->
          <div
            class="col-12 col-lg-8 recipe"
            data-recipe-id="pain-bananes-fibres"
            data-tags="patisserie 1-2-tasse banane fibres hemps flax bran cuisson-four congelo"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                  <span class="badge bg-success d-none" data-stock-pill=""
                    >En stock</span
                  ><span
                    class="badge bg-light text-dark border d-none"
                    data-stock-count=""
                    >0 portions</span
                  >
                  <span class="badge badge-cat">Boulangerie</span>
                  <span class="badge badge-cube">Cube 1/2 tasse</span>
                  <span class="badge text-bg-light tag">tag:cuisson-four</span>
                  <span class="badge text-bg-light tag">tag:fibres</span>
                </div>
                <h3 class="h5 mb-1">
                  Pain aux bananes riche en fibres, cubes 1/2 tasse
                </h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-pain-bananes-fibres"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-pain-bananes-fibres"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-pain-bananes-fibres">
                  <div class="muted mb-2">
                    Version avec son de blé + graines de lin + graines de
                    chanvre. Rendement: 8 à 10 cubes.
                  </div>
                  <div class="row g-3">
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">Ingrédients</div>
                      <ul class="list-tight">
                        <li>4 bananes très mûres, écrasées (env 1.5 tasse)</li>
                        <li>2 oeufs</li>
                        <li>1/4 tasse huile neutre</li>
                        <li>1/4 tasse miel ou sirop d’érable</li>
                        <li>1 c. à thé vanille</li>
                        <li>1 tasse farine blé entier</li>
                        <li>1/3 tasse son de blé</li>
                        <li>1/4 tasse graines de lin moulues</li>
                        <li>1/4 tasse graines de chanvre</li>
                        <li>1 c. à thé bicarbonate</li>
                        <li>1/2 c. à thé cannelle</li>
                        <li>1/4 c. à thé sel</li>
                        <li>
                          Option: noix, pépites, raisins en quantité modérée
                        </li>
                      </ul>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="smallcaps muted mb-1">
                        Étapes, moules silicone
                      </div>
                      <ol class="list-tight">
                        <li>
                          Four à 350°F. Mettre les moules silicone sur une
                          plaque métallique.
                        </li>
                        <li>
                          Mélanger humide, mélanger sec, combiner sans trop
                          brasser.
                        </li>
                        <li>Remplir chaque cavité presque jusqu’au bord.</li>
                        <li>Cuire 30 à 40 min, vérifier à 30 min.</li>
                        <li>
                          Refroidir 10 à 15 min dans moule, démouler, refroidir
                          complètement.
                        </li>
                        <li>Congeler et ensacher.</li>
                      </ol>
                      <div class="muted mt-2">
                        Temps varie selon profondeur des moules. Éviter 400°F
                        pour quick bread, centre risque d’être cru.
                      </div>
                    </div>
                  </div>
                  <div class="hr-soft"></div>
                  <div class="smallcaps muted mb-1">
                    Nutrition et coût, par cube 1/2 tasse
                  </div>
                  <div class="d-flex flex-wrap gap-2">
                    <span class="badge badge-nutri">≈ 180 à 210 kcal</span>
                    <span class="badge badge-nutri">≈ 7 à 9 g protéines</span>
                    <span class="badge badge-nutri">≈ 6 à 8 g fibres</span>
                    <span class="badge badge-cost">≈ 0.35 à 0.70 $</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ========================= -->
          <!-- SIDES -->
          <!-- ========================= -->
          <div class="col-12">
            <h2 class="h4 section-title" id="sec-sides">
              Accompagnements et idées, sans oignon frais
            </h2>
            <p class="muted mb-0">
              Ici, surtout des idées modulaires. Ajouter acidité au service.
            </p>
          </div>
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="side-slaw-chou-lime"
            data-tags="side slaw chou mexicain frais"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <span class="badge badge-cat">Side</span>
                <h3 class="h5 mb-2">Slaw chou lime, sans oignon</h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-side-slaw-chou-lime"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-side-slaw-chou-lime"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div class="collapse mt-3" id="recDetails-side-slaw-chou-lime">
                  <ul class="list-tight">
                    <li>Chou émincé</li>
                    <li>Sel</li>
                    <li>Lime au service</li>
                    <li>Option: coriandre au service</li>
                  </ul>
                  <div class="muted">
                    Meilleur frais, pas idéal en cubes long terme.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="col-12 col-lg-6 recipe"
            data-recipe-id="idees-legumes-mexicains"
            data-tags="side mexicain legumes idees"
          >
            <div class="card recipe-card">
              <div class="card-body">
                <span class="badge badge-cat">Idées mexicaines</span>
                <h3 class="h5 mb-2">
                  Légumes mexicains sans oignon, idées cubes
                </h3>
                <div
                  class="mt-2 d-flex align-items-center gap-2 stock-controls"
                  data-stock-controls=""
                >
                  <button
                    aria-label="Diminuer"
                    class="btn btn-outline-secondary btn-sm px-3 py-2"
                    data-stock-dec=""
                    type="button"
                  >
                    −
                  </button>
                  <div class="mono stock-value px-2" data-stock-value="">0</div>
                  <button
                    aria-label="Augmenter"
                    class="btn btn-primary btn-sm px-3 py-2"
                    data-stock-inc=""
                    type="button"
                  >
                    +
                  </button>
                </div>
                <button
                  aria-controls="recDetails-idees-legumes-mexicains"
                  aria-expanded="false"
                  class="btn btn-link p-0 mt-2 text-decoration-none d-flex align-items-center gap-2"
                  data-bs-target="#recDetails-idees-legumes-mexicains"
                  data-bs-toggle="collapse"
                  data-recipe-toggle="1"
                  type="button"
                >
                  <span class="mono">▶</span
                  ><span class="small muted">Afficher les détails</span>
                </button>
                <div
                  class="collapse mt-3"
                  id="recDetails-idees-legumes-mexicains"
                >
                  <ul class="list-tight">
                    <li>Calabacitas (zucchini + maïs), cumin, ail</li>
                    <li>
                      Maïs rôti style elote, paprika fumé, lime au service
                    </li>
                    <li>Patate douce épicée rôtie, cumin, paprika</li>
                    <li>Poivrons rôtis, ail, origan</li>
                    <li>Haricots noirs cumin et ail (side fibre)</li>
                  </ul>
                  <div class="muted">
                    Cubes 1/2 tasse ou 1 tasse selon densité.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <footer class="mt-5 mb-4"></footer>
      </div>
    </main>
    <!-- Bootstrap JS (optional for components, not required for search) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const searchInput = document.getElementById("searchInput");
      const clearBtn = document.getElementById("clearBtn");
      const recipeEls = Array.from(document.querySelectorAll(".recipe"));

      function norm(s) {
        return (s || "")
          .toString()
          .toLowerCase()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "");
      }

      function getRecipeText(el) {
        const tags = el.getAttribute("data-tags") || "";
        const text = el.innerText || "";
        return norm(tags + " " + text);
      }

      function applyFilter(qRaw) {
        const q = norm(qRaw.trim());
        recipeEls.forEach((el) => {
          const hay = getRecipeText(el);
          const show = q.length === 0 ? true : hay.includes(q);
          el.style.display = show ? "" : "none";
        });
      }

      // Search typing
      searchInput.addEventListener("input", (e) => applyFilter(e.target.value));

      // Quick filter buttons
      document.querySelectorAll("[data-filter]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const v = btn.getAttribute("data-filter");
          searchInput.value = v;
          applyFilter(v);
          searchInput.focus();
        });
      });

      // Clear
      clearBtn.addEventListener("click", () => {
        searchInput.value = "";
        applyFilter("");
        searchInput.focus();
      });

      // Initial
      applyFilter("");
    </script>
    <script>
      (function () {
        const desktop = document.getElementById("searchInput");
        const mobile = document.getElementById("searchInputMobile");
        const clearDesktop = document.getElementById("clearBtn");
        const clearMobile = document.getElementById("clearBtnMobile");

        function setSearch(v) {
          if (desktop) desktop.value = v;
          if (mobile) mobile.value = v;
          if (typeof applyFilter === "function") applyFilter(v || "");
        }

        if (desktop && mobile) {
          desktop.addEventListener("input", () => setSearch(desktop.value));
          mobile.addEventListener("input", () => setSearch(mobile.value));
        } else if (mobile && !desktop) {
          mobile.addEventListener("input", () => setSearch(mobile.value));
        }

        if (clearDesktop)
          clearDesktop.addEventListener("click", () => setSearch(""));
        if (clearMobile)
          clearMobile.addEventListener("click", () => setSearch(""));

        // Filtres rapides dans l’offcanvas (data-filter existe déjà)
        document
          .querySelectorAll("#toolsDrawer [data-filter]")
          .forEach((btn) => {
            btn.addEventListener("click", () => {
              const v = btn.getAttribute("data-filter");
              setSearch(v);
            });
          });

        // Toggle en-stock mobile: déclenche le même comportement que desktop
        const tDesk = document.getElementById("toggleInStock");
        const tMob = document.getElementById("toggleInStockMobile");
        if (tDesk && tMob) {
          tMob.addEventListener("click", () => tDesk.click());
        }
      })();
    </script>
    <script>
      // JSONP loader (pour Apps Script sans CORS)
      function jsonp(url) {
        return new Promise((resolve, reject) => {
          const cb = "cb_" + Math.random().toString(36).slice(2);
          const script = document.createElement("script");
          const timeout = setTimeout(() => {
            cleanup();
            reject(new Error("Timeout JSONP"));
          }, 8000);

          function cleanup() {
            clearTimeout(timeout);
            script.remove();
            try {
              delete window[cb];
            } catch (e) {
              window[cb] = undefined;
            }
          }

          window[cb] = (data) => {
            cleanup();
            resolve(data);
          };

          const sep = url.includes("?") ? "&" : "?";
          script.src = `${url}${sep}callback=${cb}`;
          script.onerror = () => {
            cleanup();
            reject(new Error("Erreur chargement JSONP"));
          };

          document.body.appendChild(script);
        });
      }
    </script>
    <script>
      const API_URL =
        "https://script.google.com/macros/s/AKfycbwvm-jz6BS48xFB3Sg2zNYHTBvgr2K10PGH4jvdTV_60w0YedBLAVxmAhtHhxNMOSy6/exec"; // .../exec

      const inventoryState = new Map(); // id -> {count, maj}

      function toInt(n) {
        const v = Number(n);
        return Number.isFinite(v) ? Math.max(0, Math.floor(v)) : 0;
      }

      function setRecipeUI(recipeEl, count, maj) {
        const pill = recipeEl.querySelector("[data-stock-pill]");
        const badge = recipeEl.querySelector("[data-stock-count]");
        const val = recipeEl.querySelector("[data-stock-value]");

        if (pill) pill.classList.toggle("d-none", count <= 0);
        if (badge) {
          badge.textContent = count === 1 ? "1 cube" : `${count} cubes`;
          badge.classList.toggle("d-none", count <= 0);
        }
        if (val) val.textContent = String(count);

        // Tag "en-stock" pour la recherche
        const tags = recipeEl.getAttribute("data-tags") || "";
        const has = /\ben-stock\b/.test(tags);
        if (count > 0 && !has)
          recipeEl.setAttribute("data-tags", (tags + " en-stock").trim());
        if (count <= 0 && has)
          recipeEl.setAttribute(
            "data-tags",
            tags
              .replace(/\ben-stock\b/g, "")
              .replace(/\s+/g, " ")
              .trim()
          );
      }

      function refreshInventoryBar() {
        const recipeEls = Array.from(
          document.querySelectorAll("#recipes .recipe[data-recipe-id]")
        );
        let total = 0;
        let inStock = 0;
        let last = "";

        recipeEls.forEach((el) => {
          const id = el.getAttribute("data-recipe-id");
          const st = inventoryState.get(id);
          const c = st ? st.count : 0;
          total += c;
          if (c > 0) inStock += 1;
          if (st && st.maj) last = st.maj; // dernier non vide
        });

        const totalEl = document.getElementById("invTotalCubes");
        const inStockEl = document.getElementById("invRecipesInStock");
        const lastEl = document.getElementById("invLastUpdated");

        if (totalEl) totalEl.textContent = String(total);
        if (inStockEl)
          inStockEl.textContent =
            inStock === 1
              ? "1 recette en stock"
              : `${inStock} recettes en stock`;
        if (lastEl) lastEl.textContent = last ? `Maj: ${last}` : "Maj: -";
        // Afficher la liste des recettes en stock
        try {
          const inStockItems = [];
          document
            .querySelectorAll("#recipes .recipe[data-recipe-id]")
            .forEach((el) => {
              const id = el.getAttribute("data-recipe-id");
              const st = inventoryState.get(id);
              const c = st ? st.count : 0;
              if (c > 0) {
                const h3 = el.querySelector("h3");
                const title = h3 ? h3.textContent.trim() : id;
                let anchor = el.id;
                if (!anchor) {
                  anchor = "rec-" + id;
                  el.id = anchor;
                }
                inStockItems.push({ id, count: c, title, anchor });
              }
            });
          if (window.__renderInStockList)
            window.__renderInStockList(inStockItems);
        } catch (e) {
          console.error(e);
        }

        // Si tu as une fonction applyFilter existante (recherche), relancer pour inclure "en-stock"
        const searchInput = document.getElementById("searchInput");
        if (searchInput && typeof applyFilter === "function")
          applyFilter(searchInput.value || "");
        if (window.__applyInStockDefault) window.__applyInStockDefault();
      }

      async function apiGetInventory() {
        const res = await fetch(API_URL, { method: "GET", cache: "no-store" });
        if (!res.ok) throw new Error("GET inventaire échoué");
        return await res.json();
      }

      async function apiDeltaUpdate(id, delta) {
        // Écriture via JSONP GET: ?op=delta&id=...&delta=...
        const url = `${API_URL}?op=delta&id=${encodeURIComponent(
          id
        )}&delta=${encodeURIComponent(delta)}`;
        const resp = await jsonp(url);
        if (!resp || !resp.ok)
          throw new Error(resp && resp.error ? resp.error : "Erreur API delta");
        return resp; // {ok, id, en_stock, maj, ...}
      }

      async function loadAndApplyInventory() {
        const data = await apiGetInventory();
        if (!data || !data.ok)
          throw new Error(data && data.error ? data.error : "Réponse invalide");

        inventoryState.clear();
        (data.items || []).forEach((it) => {
          inventoryState.set(String(it.id), {
            count: toInt(it.en_stock),
            maj: it.maj || "",
          });
        });

        const recipeEls = Array.from(
          document.querySelectorAll("#recipes .recipe[data-recipe-id]")
        );
        recipeEls.forEach((el) => {
          const id = el.getAttribute("data-recipe-id");
          const st = inventoryState.get(id);
          const count = st ? st.count : 0;
          setRecipeUI(el, count, st ? st.maj : "");
        });

        refreshInventoryBar();
      }

      function wireStockButtons() {
        const recipeEls = Array.from(
          document.querySelectorAll("#recipes .recipe[data-recipe-id]")
        );

        recipeEls.forEach((el) => {
          const id = el.getAttribute("data-recipe-id");
          const incBtn = el.querySelector("[data-stock-inc]");
          const decBtn = el.querySelector("[data-stock-dec]");

          async function run(delta) {
            // Optimiste: maj UI immédiate, rollback si erreur
            const st = inventoryState.get(id) || { count: 0, maj: "" };
            const prev = st.count;
            const next = Math.max(0, prev + delta);

            inventoryState.set(id, { count: next, maj: st.maj });
            setRecipeUI(el, next, st.maj);
            refreshInventoryBar();

            // Désactiver boutons pendant l’appel
            if (incBtn) incBtn.disabled = true;
            if (decBtn) decBtn.disabled = true;

            try {
              const resp = await apiDeltaUpdate(id, delta);

              if (!resp || !resp.ok)
                throw new Error(resp && resp.error ? resp.error : "Erreur API");

              // Sync avec réponse serveur
              inventoryState.set(id, {
                count: toInt(resp.en_stock),
                maj: resp.maj || "",
              });
              setRecipeUI(el, toInt(resp.en_stock), resp.maj || "");
              refreshInventoryBar();
            } catch (e) {
              // rollback
              inventoryState.set(id, { count: prev, maj: st.maj });
              setRecipeUI(el, prev, st.maj);
              refreshInventoryBar();
              console.error(e);
              alert(
                "Impossible de mettre à jour l’inventaire. Vérifie l’API Apps Script."
              );
            } finally {
              if (incBtn) incBtn.disabled = false;
              if (decBtn) decBtn.disabled = false;
            }
          }

          if (incBtn) incBtn.addEventListener("click", () => run(+1));
          if (decBtn) decBtn.addEventListener("click", () => run(-1));
        });
      }

      document.addEventListener("DOMContentLoaded", async () => {
        await loadAndApplyInventory();
        wireStockButtons();
      });
    </script>
    <script>
      window.__renderInStockList = function (inStockItems) {
        const ul = document.getElementById("invInStockList");
        if (!ul) return;
        ul.innerHTML = "";
        if (!inStockItems.length) {
          const li = document.createElement("li");
          li.className = "list-group-item text-muted";
          li.textContent = "Aucune recette en stock.";
          ul.appendChild(li);
          return;
        }
        inStockItems
          .sort((a, b) => b.count - a.count)
          .slice(0, 20)
          .forEach((item) => {
            const li = document.createElement("li");
            li.className =
              "list-group-item d-flex justify-content-between align-items-center";
            const a = document.createElement("a");
            a.href = "#" + item.anchor;
            a.textContent = item.title;
            a.style.textDecoration = "none";
            const badge = document.createElement("span");
            badge.className = "badge text-bg-primary rounded-pill";
            badge.textContent =
              item.count === 1 ? "1 portion" : item.count + " portions";
            li.appendChild(a);
            li.appendChild(badge);
            ul.appendChild(li);
          });
      };
    </script>
    <script>
      (function () {
        const btn = document.getElementById("toggleInStock");
        const searchInput = document.getElementById("searchInput");
        if (!btn || !searchInput) return;

        let inStockOnly = true;

        function setBtnUI() {
          btn.setAttribute("aria-pressed", inStockOnly ? "true" : "false");
          btn.classList.toggle("btn-success", inStockOnly);
          btn.classList.toggle("btn-outline-success", !inStockOnly);
          btn.textContent = inStockOnly
            ? "En stock seulement"
            : "Toutes les recettes";
          btn.title = inStockOnly
            ? "Afficher seulement les recettes en stock"
            : "Afficher toutes les recettes";
        }

        function normalizeInStockToken(str) {
          return (str || "")
            .replace(/\ben-stock\b/g, "") // remove ALL existing tokens
            .replace(/\s+/g, " ")
            .trim();
        }

        function applyMode() {
          const current = (searchInput.value || "").trim();

          if (inStockOnly) {
            // Keep user's text, but ensure en-stock appears exactly once at the start.
            const cleaned = normalizeInStockToken(current);
            searchInput.value = cleaned ? `en-stock ${cleaned}` : "en-stock";
          } else {
            // Remove en-stock entirely, keep the rest.
            searchInput.value = normalizeInStockToken(current);
          }

          if (typeof applyFilter === "function")
            applyFilter(searchInput.value || "");
        }

        btn.addEventListener("click", function () {
          inStockOnly = !inStockOnly;
          setBtnUI();
          applyMode();
        });

        window.__applyInStockDefault = function () {
          if (!inStockOnly) return;
          setBtnUI();
          applyMode();
        };

        setBtnUI();
      })();
    </script>
    <div
      aria-labelledby="toolsDrawerLabel"
      class="offcanvas offcanvas-end"
      id="toolsDrawer"
      tabindex="-1"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="toolsDrawerLabel">Outils</h5>
        <button
          aria-label="Fermer"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          type="button"
        ></button>
      </div>
      <div class="offcanvas-body">
        <div class="mb-3">
          <label class="form-label smallcaps muted" for="searchInputMobile"
            >Recherche</label
          >
          <input
            class="form-control"
            id="searchInputMobile"
            placeholder="Ex: soupe, coco, tag:vegetarien…"
            type="search"
          />
          <div class="form-text">
            Astuce: <span class="kbd">en-stock</span>,
            <span class="kbd">tag:soupe</span>
          </div>
        </div>
        <div class="mb-3">
          <div class="smallcaps muted mb-2">Filtres</div>
          <div class="d-flex flex-wrap gap-2">
            <button
              class="btn btn-outline-primary btn-sm btn-chip"
              data-bs-dismiss="offcanvas"
              data-filter="tag:soupe"
              type="button"
            >
              Soupes
            </button>
            <button
              class="btn btn-outline-primary btn-sm btn-chip"
              data-bs-dismiss="offcanvas"
              data-filter="tag:bol"
              type="button"
            >
              Bols
            </button>
            <button
              class="btn btn-outline-primary btn-sm btn-chip"
              data-bs-dismiss="offcanvas"
              data-filter="tag:vegetarien"
              type="button"
            >
              Végétarien
            </button>
            <button
              class="btn btn-outline-primary btn-sm btn-chip"
              data-bs-dismiss="offcanvas"
              data-filter="tag:poisson"
              type="button"
            >
              Poisson
            </button>
            <button
              aria-pressed="true"
              class="btn btn-success btn-sm btn-chip"
              id="toggleInStockMobile"
              type="button"
            >
              En stock seulement
            </button>
            <button
              class="btn btn-outline-secondary btn-sm btn-chip"
              id="clearBtnMobile"
              type="button"
            >
              Réinitialiser
            </button>
          </div>
        </div>
        <div class="mb-2">
          <div class="smallcaps muted mb-2">Table des matières</div>
          <div class="toc d-flex flex-column gap-2">
            <a data-bs-dismiss="offcanvas" href="#sec-soupes"
              >Soupes et ragoûts</a
            >
            <a data-bs-dismiss="offcanvas" href="#sec-Platsprincipaux">Mains</a>
            <a data-bs-dismiss="offcanvas" href="#sec-riz">Riz et grains</a>
            <a data-bs-dismiss="offcanvas" href="#sec-veg">Bases légumes</a>
            <a data-bs-dismiss="offcanvas" href="#sec-denses"
              >Composants denses</a
            >
            <a data-bs-dismiss="offcanvas" href="#sec-bols">Bols</a>
            <a data-bs-dismiss="offcanvas" href="#sec-patisserie"
              >Boulangerie</a
            >
            <a data-bs-dismiss="offcanvas" href="#sec-sides">Accompagnements</a>
          </div>
        </div>
      </div>
    </div>
    <script>
      (function () {
        document
          .querySelectorAll("button[data-recipe-toggle]")
          .forEach((btn) => {
            const targetSel = btn.getAttribute("data-bs-target");
            const target = targetSel ? document.querySelector(targetSel) : null;
            if (!target) return;

            function setState(isOpen) {
              btn.setAttribute("aria-expanded", isOpen ? "true" : "false");
              const label = btn.querySelector(".small.muted");
              if (label)
                label.textContent = isOpen
                  ? "Masquer les détails"
                  : "Afficher les détails";
            }

            target.addEventListener("show.bs.collapse", () => setState(true));
            target.addEventListener("hide.bs.collapse", () => setState(false));
          });

        document
          .querySelectorAll("[data-stock-inc], [data-stock-dec]")
          .forEach((b) => {
            b.addEventListener("click", (e) => {
              e.stopPropagation();
            });
            b.addEventListener(
              "touchstart",
              (e) => {
                e.stopPropagation();
              },
              { passive: true }
            );
          });
      })();
    </script>
    <script>
      (function () {
        function wireMobileTools() {
          const drawer = document.getElementById("toolsDrawer");
          const mobile = document.getElementById("searchInputMobile");
          const desktop = document.getElementById("searchInput");
          const clearMobile = document.getElementById("clearBtnMobile");
          const toggleMobile = document.getElementById("toggleInStockMobile");
          const toggleDesktop = document.getElementById("toggleInStock");

          if (!drawer || !mobile) return;

          function setSearch(v) {
            if (desktop) desktop.value = v;
            mobile.value = v;
            if (typeof applyFilter === "function") applyFilter(v || "");
          }

          // Search input
          if (!mobile.__wired) {
            mobile.addEventListener("input", () => setSearch(mobile.value));
            mobile.__wired = true;
          }

          // Clear
          if (clearMobile && !clearMobile.__wired) {
            clearMobile.addEventListener("click", () => setSearch(""));
            clearMobile.__wired = true;
          }

          // Filter buttons inside drawer
          drawer.querySelectorAll("[data-filter]").forEach((btn) => {
            if (btn.__wired) return;
            btn.addEventListener("click", () => {
              const v = btn.getAttribute("data-filter");
              setSearch(v);
            });
            btn.__wired = true;
          });

          // Toggle en-stock (mobile déclenche desktop)
          if (toggleMobile && toggleDesktop && !toggleMobile.__wired) {
            toggleMobile.addEventListener("click", () => {
              toggleDesktop.click();
              // sync champ mobile avec la valeur desktop après toggle
              if (desktop) mobile.value = desktop.value;
              if (typeof applyFilter === "function")
                applyFilter((desktop ? desktop.value : mobile.value) || "");
            });
            toggleMobile.__wired = true;
          }
        }

        document.addEventListener("DOMContentLoaded", wireMobileTools);

        document.addEventListener("shown.bs.offcanvas", function (evt) {
          if (evt.target && evt.target.id === "toolsDrawer") {
            wireMobileTools();
          }
        });
      })();
    </script>

    <script>
      (function () {
        function forceTop() {
          // enlever hash si présent
          if (location.hash) {
            history.replaceState(null, "", location.pathname + location.search);
          }
          // multi-pass pour contrer la restauration automatique (Safari/iOS)
          window.scrollTo(0, 0);
          setTimeout(() => window.scrollTo(0, 0), 0);
          setTimeout(() => window.scrollTo(0, 0), 50);
          setTimeout(() => window.scrollTo(0, 0), 200);
        }

        window.addEventListener("DOMContentLoaded", forceTop, { once: true });
        window.addEventListener("load", forceTop, { once: true });

        // Important: quand on revient via bfcache (Safari)
        window.addEventListener("pageshow", (e) => {
          forceTop();
        });

        // évite la restauration de scroll à la prochaine navigation
        window.addEventListener("beforeunload", () => {
          window.scrollTo(0, 0);
        });
      })();
    </script>
  </body>
</html>
